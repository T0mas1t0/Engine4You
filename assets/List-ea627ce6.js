import{r as s,j as o}from"./react-70a8b2ce.js";import{a as C}from"./material-react-table-1cab454e.js";import{B as z,i as l,a4 as d,aA as T,aT as v}from"./@mui-9d851e58.js";import{N as A}from"./react-router-dom-f58d90be.js";import{S as L}from"./SimpleSnackbar-51c6119f.js";function O({carsData:n,title:p}){const[m,u]=s.useState({pageIndex:0,pageSize:5}),[f,t]=s.useState(!1),[g,i]=s.useState(""),[h,c]=s.useState(""),x=(e,a)=>{a!=="clickaway"&&t(!1)},[y,S]=s.useState(n);s.useEffect(()=>{S(n)},[n]);const j=s.useMemo(()=>[{accessorKey:"photo",header:"Photo",Cell:({cell:e})=>o.jsx("img",{id:"carPhoto",src:e.getValue()}),size:100,enableGrouping:!1},{accessorKey:"brand",header:"Brand",accessorFn:e=>`${e.brand}`,size:110},{accessorKey:"model",header:"model",accessorFn:e=>`${e.brand} ${e.model}`,size:110,enableGrouping:!1},{accessorKey:"price",header:"price",Cell:({cell:e})=>o.jsx("span",{children:e.getValue()+" €"}),size:10},{accessorKey:"motorInfo.motor.description",header:"motor",size:10},{accessorKey:"Power",header:"Power",accessorFn:e=>`${e.motorInfo.Power.description}`,size:10},{accessorKey:"Traccion",header:"Traccion",accessorFn:e=>`${e.motorInfo.traccion.description}`,size:10},{accessorKey:"Range",header:"Range",accessorFn:e=>`${e.motorInfo.Range.description}`,size:10}],[]);function b(e){var a=localStorage.getItem("compareList");if(a==null)console.log(e),localStorage.setItem("compareList",JSON.stringify([e]));else{var r=JSON.parse(localStorage.getItem("compareList"));r.length>=4?(i("A lista encontra-se cheia! (max.: 4 carros) "),t(!0),c("error")):I(r,e)?(i("Adicionado à Lista de comparação com Sucesso!"),t(!0),c("success"),r.push(e),localStorage.setItem("compareList",JSON.stringify(r))):(i("Carro já se encontra na lista!"),t(!0),c("error"))}console.log(e)}function I(e,a){for(var r=0;r<e.length;r++)if(e[r].id==a.id)return!1;return!0}return o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{margin:"2%"},children:[o.jsx("h3",{children:p}),o.jsx(C,{enableColumnOrdering:!0,enableGrouping:!0,columns:j,data:y,enableRowActions:!0,onPaginationChange:u,state:{pagination:m},initialState:{columnVisibility:{brand:!1,Traccion:!1,Range:!1}},positionActionsColumn:"last",displayColumnDefOptions:{"mrt-row-actions":{header:"Actions",size:.1}},renderRowActions:({row:e,table:a})=>o.jsxs(z,{sx:{display:"flex",flexWrap:"nowrap",gap:"9px"},children:[o.jsx(l,{title:"Inspect car",arrow:!0,children:o.jsx(A,{to:"/carPage/"+e.id,children:o.jsx(d,{color:"primary",children:o.jsx(T,{})})},e.id)}),o.jsx(l,{title:"Add to Compare",arrow:!0,children:o.jsx(d,{color:"error",onClick:()=>b(e.original),children:o.jsx(v,{})})})]})})]}),o.jsx(L,{text:g,handleClose:x,open:f,severityType:h})]})}export{O as L};
