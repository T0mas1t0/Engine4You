import{_ as be}from"./@babel-b99a675e.js";import{r as O}from"./react-70a8b2ce.js";import{L as le,T as Ze,R as et,U as tt,B as nt,M as rt,C as ot,a as it,O as st,P as at,S as Se,b as ce,N as lt,A as ct,W as ut,c as ft,d as dt,e as pt,V as vt,f as te,g as mt,h as ht,i as gt}from"./three-56493ce6.js";import{u as yt}from"./react-use-measure-b7a4e93d.js";import{F as _t,u as wt}from"./its-fine-1f0dc00c.js";import{R as bt,c as J}from"./react-reconciler-3ec039bd.js";import"./react-dom-bba467d9.js";import{G as Ee,D as Et,M as ue,O as Ct}from"./three-stdlib-dabc02b2.js";import{c as Pt}from"./zustand-aaca58b1.js";import{s as St,p as Mt,c as Ot}from"./suspend-react-4f9dedb1.js";const kt="modulepreload",Rt=function(e){return"/Engine4You/"+e},Me={},fn=function(t,o,s){if(!o||o.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(o.map(f=>{if(f=Rt(f),f in Me)return;Me[f]=!0;const _=f.endsWith(".css"),g=_?'[rel="stylesheet"]':"";if(!!s)for(let n=c.length-1;n>=0;n--){const r=c[n];if(r.href===f&&(!_||r.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=_?"stylesheet":kt,_||(v.as="script",v.crossOrigin=""),v.href=f,document.head.appendChild(v),_)return new Promise((n,r)=>{v.addEventListener("load",n),v.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${f}`)))})})).then(()=>t()).catch(f=>{const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=f,window.dispatchEvent(_),!_.defaultPrevented)throw f})};var Ie={exports:{}},Fe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(h,M){var S=h.length;h.push(M);e:for(;0<S;){var k=S-1>>>1,R=h[k];if(0<c(R,M))h[k]=M,h[S]=R,S=k;else break e}}function o(h){return h.length===0?null:h[0]}function s(h){if(h.length===0)return null;var M=h[0],S=h.pop();if(S!==M){h[0]=S;e:for(var k=0,R=h.length,I=R>>>1;k<I;){var B=2*(k+1)-1,F=h[B],N=B+1,$=h[N];if(0>c(F,S))N<R&&0>c($,F)?(h[k]=$,h[N]=S,k=N):(h[k]=F,h[B]=S,k=B);else if(N<R&&0>c($,S))h[k]=$,h[N]=S,k=N;else break e}}return M}function c(h,M){var S=h.sortIndex-M.sortIndex;return S!==0?S:h.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var _=Date,g=_.now();e.unstable_now=function(){return _.now()-g}}var i=[],v=[],n=1,r=null,u=3,d=!1,p=!1,C=!1,y=typeof setTimeout=="function"?setTimeout:null,a=typeof clearTimeout=="function"?clearTimeout:null,l=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(h){for(var M=o(v);M!==null;){if(M.callback===null)s(v);else if(M.startTime<=h)s(v),M.sortIndex=M.expirationTime,t(i,M);else break;M=o(v)}}function P(h){if(C=!1,m(h),!p)if(o(i)!==null)p=!0,H(E);else{var M=o(v);M!==null&&G(P,M.startTime-h)}}function E(h,M){p=!1,C&&(C=!1,a(L),L=-1),d=!0;var S=u;try{for(m(M),r=o(i);r!==null&&(!(r.expirationTime>M)||h&&!b());){var k=r.callback;if(typeof k=="function"){r.callback=null,u=r.priorityLevel;var R=k(r.expirationTime<=M);M=e.unstable_now(),typeof R=="function"?r.callback=R:r===o(i)&&s(i),m(M)}else s(i);r=o(i)}if(r!==null)var I=!0;else{var B=o(v);B!==null&&G(P,B.startTime-M),I=!1}return I}finally{r=null,u=S,d=!1}}var w=!1,T=null,L=-1,x=5,A=-1;function b(){return!(e.unstable_now()-A<x)}function j(){if(T!==null){var h=e.unstable_now();A=h;var M=!0;try{M=T(!0,h)}finally{M?z():(w=!1,T=null)}}else w=!1}var z;if(typeof l=="function")z=function(){l(j)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,W=q.port2;q.port1.onmessage=j,z=function(){W.postMessage(null)}}else z=function(){y(j,0)};function H(h){T=h,w||(w=!0,z())}function G(h,M){L=y(function(){h(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(h){h.callback=null},e.unstable_continueExecution=function(){p||d||(p=!0,H(E))},e.unstable_forceFrameRate=function(h){0>h||125<h?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<h?Math.floor(1e3/h):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return o(i)},e.unstable_next=function(h){switch(u){case 1:case 2:case 3:var M=3;break;default:M=u}var S=u;u=M;try{return h()}finally{u=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(h,M){switch(h){case 1:case 2:case 3:case 4:case 5:break;default:h=3}var S=u;u=h;try{return M()}finally{u=S}},e.unstable_scheduleCallback=function(h,M,S){var k=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?k+S:k):S=k,h){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=S+R,h={id:n++,callback:M,priorityLevel:h,startTime:S,expirationTime:R,sortIndex:-1},S>k?(h.sortIndex=S,t(v,h),o(i)===null&&h===o(v)&&(C?(a(L),L=-1):C=!0,G(P,S-k))):(h.sortIndex=R,t(i,h),p||d||(p=!0,H(E))),h},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(h){var M=u;return function(){var S=u;u=M;try{return h.apply(this,arguments)}finally{u=S}}}})(Fe);Ie.exports=Fe;var Oe=Ie.exports;const Ce={},Tt=e=>void Object.assign(Ce,e);function Lt(e,t){function o(n,{args:r=[],attach:u,...d},p){let C=`${n[0].toUpperCase()}${n.slice(1)}`,y;if(n==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const a=d.object;y=Y(a,{type:n,root:p,attach:u,primitive:!0})}else{const a=Ce[C];if(!a)throw new Error(`R3F: ${C} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(r))throw new Error("R3F: The args prop must be an array!");y=Y(new a(...r),{type:n,root:p,attach:u,memoizedProps:{args:r}})}return y.__r3f.attach===void 0&&(y instanceof nt?y.__r3f.attach="geometry":y instanceof rt&&(y.__r3f.attach="material")),C!=="inject"&&pe(y,d),y}function s(n,r){let u=!1;if(r){var d,p;(d=r.__r3f)!=null&&d.attach?de(n,r,r.__r3f.attach):r.isObject3D&&n.isObject3D&&(n.add(r),u=!0),u||(p=n.__r3f)==null||p.objects.push(r),r.__r3f||Y(r,{}),r.__r3f.parent=n,we(r),K(r)}}function c(n,r,u){let d=!1;if(r){var p,C;if((p=r.__r3f)!=null&&p.attach)de(n,r,r.__r3f.attach);else if(r.isObject3D&&n.isObject3D){r.parent=n,r.dispatchEvent({type:"added"});const y=n.children.filter(l=>l!==r),a=y.indexOf(u);n.children=[...y.slice(0,a),r,...y.slice(a)],d=!0}d||(C=n.__r3f)==null||C.objects.push(r),r.__r3f||Y(r,{}),r.__r3f.parent=n,we(r),K(r)}}function f(n,r,u=!1){n&&[...n].forEach(d=>_(r,d,u))}function _(n,r,u){if(r){var d,p,C;if(r.__r3f&&(r.__r3f.parent=null),(d=n.__r3f)!=null&&d.objects&&(n.__r3f.objects=n.__r3f.objects.filter(P=>P!==r)),(p=r.__r3f)!=null&&p.attach)je(n,r,r.__r3f.attach);else if(r.isObject3D&&n.isObject3D){var y;n.remove(r),(y=r.__r3f)!=null&&y.root&&Ht(r.__r3f.root,r)}const l=(C=r.__r3f)==null?void 0:C.primitive,m=!l&&(u===void 0?r.dispose!==null:u);if(!l){var a;f((a=r.__r3f)==null?void 0:a.objects,r,m),f(r.children,r,m)}if(delete r.__r3f,m&&r.dispose&&r.type!=="Scene"){const P=()=>{try{r.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Oe.unstable_scheduleCallback(Oe.unstable_IdlePriority,P):P()}K(n)}}function g(n,r,u,d){var p;const C=(p=n.__r3f)==null?void 0:p.parent;if(!C)return;const y=o(r,u,n.__r3f.root);if(n.children){for(const a of n.children)a.__r3f&&s(y,a);n.children=n.children.filter(a=>!a.__r3f)}n.__r3f.objects.forEach(a=>s(y,a)),n.__r3f.objects=[],n.__r3f.autoRemovedBeforeAppend||_(C,n),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),s(C,y),y.raycast&&y.__r3f.eventCount&&y.__r3f.root.getState().internal.interaction.push(y),[d,d.alternate].forEach(a=>{a!==null&&(a.stateNode=y,a.ref&&(typeof a.ref=="function"?a.ref(y):a.ref.current=y))})}const i=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:bt({createInstance:o,removeChild:_,appendChild:s,appendInitialChild:s,insertBefore:c,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(n,r)=>{if(!r)return;const u=n.getState().scene;u.__r3f&&(u.__r3f.root=n,s(u,r))},removeChildFromContainer:(n,r)=>{r&&_(n.getState().scene,r)},insertInContainerBefore:(n,r,u)=>{if(!r||!u)return;const d=n.getState().scene;d.__r3f&&c(d,r,u)},getRootHostContext:()=>null,getChildHostContext:n=>n,finalizeInitialChildren(n){var r;return!!((r=n==null?void 0:n.__r3f)!=null?r:{}).handlers},prepareUpdate(n,r,u,d){var p;if(((p=n==null?void 0:n.__r3f)!=null?p:{}).primitive&&d.object&&d.object!==n)return[!0];{const{args:y=[],children:a,...l}=d,{args:m=[],children:P,...E}=u;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((T,L)=>T!==m[L]))return[!0];const w=Ue(n,l,E,!0);return w.changes.length?[!1,w]:null}},commitUpdate(n,[r,u],d,p,C,y){r?g(n,d,C,y):pe(n,u)},commitMount(n,r,u,d){var p;const C=(p=n.__r3f)!=null?p:{};n.raycast&&C.handlers&&C.eventCount&&n.__r3f.root.getState().internal.interaction.push(n)},getPublicInstance:n=>n,prepareForCommit:()=>null,preparePortalMount:n=>Y(n.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(n){var r;const{attach:u,parent:d}=(r=n.__r3f)!=null?r:{};u&&d&&je(d,n,u),n.isObject3D&&(n.visible=!1),K(n)},unhideInstance(n,r){var u;const{attach:d,parent:p}=(u=n.__r3f)!=null?u:{};d&&p&&de(p,n,d),(n.isObject3D&&r.visible==null||r.visible)&&(n.visible=!0),K(n)},createTextInstance:i,hideTextInstance:i,unhideTextInstance:i,getCurrentEventPriority:()=>t?t():J.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&D.fun(performance.now)?performance.now:D.fun(Date.now)?Date.now:()=>0,scheduleTimeout:D.fun(setTimeout)?setTimeout:void 0,cancelTimeout:D.fun(clearTimeout)?clearTimeout:void 0}),applyProps:pe}}var ke,Re;const fe=e=>"colorSpace"in e||"outputColorSpace"in e,ze=()=>{var e;return(e=Ce.ColorManagement)!=null?e:null},Be=e=>e&&e.isOrthographicCamera,jt=e=>e&&e.hasOwnProperty("current"),ne=typeof window<"u"&&((ke=window.document)!=null&&ke.createElement||((Re=window.navigator)==null?void 0:Re.product)==="ReactNative")?O.useLayoutEffect:O.useEffect;function He(e){const t=O.useRef(e);return ne(()=>void(t.current=e),[e]),t}function xt({set:e}){return ne(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class Ne extends O.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}Ne.getDerivedStateFromError=()=>({error:!0});const qe="__default",Te=new Map,At=e=>e&&!!e.memoized&&!!e.changes;function Ge(e){var t;const o=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],o),e[1]):e}const Z=e=>{var t;return(t=e.__r3f)==null?void 0:t.root.getState()},D={obj:e=>e===Object(e)&&!D.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,arr:e=>Array.isArray(e),equ(e,t,{arrays:o="shallow",objects:s="reference",strict:c=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(D.str(e)||D.num(e))return e===t;const f=D.obj(e);if(f&&s==="reference")return e===t;const _=D.arr(e);if(_&&o==="reference")return e===t;if((_||f)&&e===t)return!0;let g;for(g in e)if(!(g in t))return!1;if(f&&o==="shallow"&&s==="shallow"){for(g in c?t:e)if(!D.equ(e[g],t[g],{strict:c,objects:"reference"}))return!1}else for(g in c?t:e)if(e[g]!==t[g])return!1;if(D.und(g)){if(_&&e.length===0&&t.length===0||f&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function Dt(e){const t={nodes:{},materials:{}};return e&&e.traverse(o=>{o.name&&(t.nodes[o.name]=o),o.material&&!t.materials[o.material.name]&&(t.materials[o.material.name]=o.material)}),t}function It(e){e.dispose&&e.type!=="Scene"&&e.dispose();for(const t in e)t.dispose==null||t.dispose(),delete e[t]}function Y(e,t){const o=e;return o.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function _e(e,t){let o=e;if(t.includes("-")){const s=t.split("-"),c=s.pop();return o=s.reduce((f,_)=>f[_],e),{target:o,key:c}}else return{target:o,key:t}}const Le=/-\d+$/;function de(e,t,o){if(D.str(o)){if(Le.test(o)){const f=o.replace(Le,""),{target:_,key:g}=_e(e,f);Array.isArray(_[g])||(_[g]=[])}const{target:s,key:c}=_e(e,o);t.__r3f.previousAttach=s[c],s[c]=t}else t.__r3f.previousAttach=o(e,t)}function je(e,t,o){var s,c;if(D.str(o)){const{target:f,key:_}=_e(e,o),g=t.__r3f.previousAttach;g===void 0?delete f[_]:f[_]=g}else(s=t.__r3f)==null||s.previousAttach==null||s.previousAttach(e,t);(c=t.__r3f)==null||delete c.previousAttach}function Ue(e,{children:t,key:o,ref:s,...c},{children:f,key:_,ref:g,...i}={},v=!1){var n;const r=(n=e==null?void 0:e.__r3f)!=null?n:{},u=Object.entries(c),d=[];if(v){const C=Object.keys(i);for(let y=0;y<C.length;y++)c.hasOwnProperty(C[y])||u.unshift([C[y],qe+"remove"])}u.forEach(([C,y])=>{var a;if((a=e.__r3f)!=null&&a.primitive&&C==="object"||D.equ(y,i[C]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(C))return d.push([C,y,!0,[]]);let l=[];C.includes("-")&&(l=C.split("-")),d.push([C,y,!1,l]);for(const m in c){const P=c[m];m.startsWith(`${C}-`)&&d.push([m,P,!1,m.split("-")])}});const p={...c};return r.memoizedProps&&r.memoizedProps.args&&(p.args=r.memoizedProps.args),r.memoizedProps&&r.memoizedProps.attach&&(p.attach=r.memoizedProps.attach),{memoized:p,changes:d}}const Ft=typeof process<"u"&&!1;function pe(e,t){var o,s,c;const f=(o=e.__r3f)!=null?o:{},_=f.root,g=(s=_==null||_.getState==null?void 0:_.getState())!=null?s:{},{memoized:i,changes:v}=At(t)?t:Ue(e,t),n=f.eventCount;e.__r3f&&(e.__r3f.memoizedProps=i);for(let u=0;u<v.length;u++){let[d,p,C,y]=v[u];if(fe(e)){const P="srgb",E="srgb-linear";d==="encoding"?(d="colorSpace",p=p===3001?P:E):d==="outputEncoding"&&(d="outputColorSpace",p=p===3001?P:E)}let a=e,l=a[d];if(y.length&&(l=y.reduce((m,P)=>m[P],e),!(l&&l.set))){const[m,...P]=y.reverse();a=P.reverse().reduce((E,w)=>E[w],e),d=m}if(p===qe+"remove")if(a.constructor){let m=Te.get(a.constructor);m||(m=new a.constructor,Te.set(a.constructor,m)),p=m[d]}else p=0;if(C)p?f.handlers[d]=p:delete f.handlers[d],f.eventCount=Object.keys(f.handlers).length;else if(l&&l.set&&(l.copy||l instanceof le)){if(Array.isArray(p))l.fromArray?l.fromArray(p):l.set(...p);else if(l.copy&&p&&p.constructor&&(Ft?l.constructor.name===p.constructor.name:l.constructor===p.constructor))l.copy(p);else if(p!==void 0){const m=l instanceof ot;!m&&l.setScalar?l.setScalar(p):l instanceof le&&p instanceof le?l.mask=p.mask:l.set(p),!ze()&&!g.linear&&m&&l.convertSRGBToLinear()}}else if(a[d]=p,a[d]instanceof Ze&&a[d].format===et&&a[d].type===tt){const m=a[d];fe(m)&&fe(g.gl)?m.colorSpace=g.gl.outputColorSpace:m.encoding=g.gl.outputEncoding}K(e)}if(f.parent&&g.internal&&e.raycast&&n!==f.eventCount){const u=g.internal.interaction.indexOf(e);u>-1&&g.internal.interaction.splice(u,1),f.eventCount&&g.internal.interaction.push(e)}return!(v.length===1&&v[0][0]==="onUpdate")&&v.length&&(c=e.__r3f)!=null&&c.parent&&we(e),e}function K(e){var t,o;const s=(t=e.__r3f)==null||(o=t.root)==null||o.getState==null?void 0:o.getState();s&&s.internal.frames===0&&s.invalidate()}function we(e){e.onUpdate==null||e.onUpdate(e)}function zt(e,t){e.manual||(Be(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function oe(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function Bt(){var e;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return J.DefaultEventPriority;switch((e=t.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return J.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return J.ContinuousEventPriority;default:return J.DefaultEventPriority}}function $e(e,t,o,s){const c=o.get(t);c&&(o.delete(t),o.size===0&&(e.delete(s),c.target.releasePointerCapture(s)))}function Ht(e,t){const{internal:o}=e.getState();o.interaction=o.interaction.filter(s=>s!==t),o.initialHits=o.initialHits.filter(s=>s!==t),o.hovered.forEach((s,c)=>{(s.eventObject===t||s.object===t)&&o.hovered.delete(c)}),o.capturedMap.forEach((s,c)=>{$e(o.capturedMap,t,s,c)})}function Nt(e){function t(i){const{internal:v}=e.getState(),n=i.offsetX-v.initialClick[0],r=i.offsetY-v.initialClick[1];return Math.round(Math.sqrt(n*n+r*r))}function o(i){return i.filter(v=>["Move","Over","Enter","Out","Leave"].some(n=>{var r;return(r=v.__r3f)==null?void 0:r.handlers["onPointer"+n]}))}function s(i,v){const n=e.getState(),r=new Set,u=[],d=v?v(n.internal.interaction):n.internal.interaction;for(let a=0;a<d.length;a++){const l=Z(d[a]);l&&(l.raycaster.camera=void 0)}n.previousRoot||n.events.compute==null||n.events.compute(i,n);function p(a){const l=Z(a);if(!l||!l.events.enabled||l.raycaster.camera===null)return[];if(l.raycaster.camera===void 0){var m;l.events.compute==null||l.events.compute(i,l,(m=l.previousRoot)==null?void 0:m.getState()),l.raycaster.camera===void 0&&(l.raycaster.camera=null)}return l.raycaster.camera?l.raycaster.intersectObject(a,!0):[]}let C=d.flatMap(p).sort((a,l)=>{const m=Z(a.object),P=Z(l.object);return!m||!P?a.distance-l.distance:P.events.priority-m.events.priority||a.distance-l.distance}).filter(a=>{const l=oe(a);return r.has(l)?!1:(r.add(l),!0)});n.events.filter&&(C=n.events.filter(C,n));for(const a of C){let l=a.object;for(;l;){var y;(y=l.__r3f)!=null&&y.eventCount&&u.push({...a,eventObject:l}),l=l.parent}}if("pointerId"in i&&n.internal.capturedMap.has(i.pointerId))for(let a of n.internal.capturedMap.get(i.pointerId).values())r.has(oe(a.intersection))||u.push(a.intersection);return u}function c(i,v,n,r){const u=e.getState();if(i.length){const d={stopped:!1};for(const p of i){const C=Z(p.object)||u,{raycaster:y,pointer:a,camera:l,internal:m}=C,P=new te(a.x,a.y,0).unproject(l),E=A=>{var b,j;return(b=(j=m.capturedMap.get(A))==null?void 0:j.has(p.eventObject))!=null?b:!1},w=A=>{const b={intersection:p,target:v.target};m.capturedMap.has(A)?m.capturedMap.get(A).set(p.eventObject,b):m.capturedMap.set(A,new Map([[p.eventObject,b]])),v.target.setPointerCapture(A)},T=A=>{const b=m.capturedMap.get(A);b&&$e(m.capturedMap,p.eventObject,b,A)};let L={};for(let A in v){let b=v[A];typeof b!="function"&&(L[A]=b)}let x={...p,...L,pointer:a,intersections:i,stopped:d.stopped,delta:n,unprojectedPoint:P,ray:y.ray,camera:l,stopPropagation(){const A="pointerId"in v&&m.capturedMap.get(v.pointerId);if((!A||A.has(p.eventObject))&&(x.stopped=d.stopped=!0,m.hovered.size&&Array.from(m.hovered.values()).find(b=>b.eventObject===p.eventObject))){const b=i.slice(0,i.indexOf(p));f([...b,p])}},target:{hasPointerCapture:E,setPointerCapture:w,releasePointerCapture:T},currentTarget:{hasPointerCapture:E,setPointerCapture:w,releasePointerCapture:T},nativeEvent:v};if(r(x),d.stopped===!0)break}}return i}function f(i){const{internal:v}=e.getState();for(const n of v.hovered.values())if(!i.length||!i.find(r=>r.object===n.object&&r.index===n.index&&r.instanceId===n.instanceId)){const u=n.eventObject.__r3f,d=u==null?void 0:u.handlers;if(v.hovered.delete(oe(n)),u!=null&&u.eventCount){const p={...n,intersections:i};d.onPointerOut==null||d.onPointerOut(p),d.onPointerLeave==null||d.onPointerLeave(p)}}}function _(i,v){for(let n=0;n<v.length;n++){const r=v[n].__r3f;r==null||r.handlers.onPointerMissed==null||r.handlers.onPointerMissed(i)}}function g(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>f([]);case"onLostPointerCapture":return v=>{const{internal:n}=e.getState();"pointerId"in v&&n.capturedMap.has(v.pointerId)&&requestAnimationFrame(()=>{n.capturedMap.has(v.pointerId)&&(n.capturedMap.delete(v.pointerId),f([]))})}}return function(n){const{onPointerMissed:r,internal:u}=e.getState();u.lastEvent.current=n;const d=i==="onPointerMove",p=i==="onClick"||i==="onContextMenu"||i==="onDoubleClick",y=s(n,d?o:void 0),a=p?t(n):0;i==="onPointerDown"&&(u.initialClick=[n.offsetX,n.offsetY],u.initialHits=y.map(m=>m.eventObject)),p&&!y.length&&a<=2&&(_(n,u.interaction),r&&r(n)),d&&f(y);function l(m){const P=m.eventObject,E=P.__r3f,w=E==null?void 0:E.handlers;if(E!=null&&E.eventCount)if(d){if(w.onPointerOver||w.onPointerEnter||w.onPointerOut||w.onPointerLeave){const T=oe(m),L=u.hovered.get(T);L?L.stopped&&m.stopPropagation():(u.hovered.set(T,m),w.onPointerOver==null||w.onPointerOver(m),w.onPointerEnter==null||w.onPointerEnter(m))}w.onPointerMove==null||w.onPointerMove(m)}else{const T=w[i];T?(!p||u.initialHits.includes(P))&&(_(n,u.interaction.filter(L=>!u.initialHits.includes(L))),T(m)):p&&u.initialHits.includes(P)&&_(n,u.interaction.filter(L=>!u.initialHits.includes(L)))}}c(y,n,a,l)}}return{handlePointer:g}}const We=e=>!!(e!=null&&e.render),Ve=O.createContext(null),qt=(e,t)=>{const o=Pt((g,i)=>{const v=new te,n=new te,r=new te;function u(a=i().camera,l=n,m=i().size){const{width:P,height:E,top:w,left:T}=m,L=P/E;l instanceof te?r.copy(l):r.set(...l);const x=a.getWorldPosition(v).distanceTo(r);if(Be(a))return{width:P/a.zoom,height:E/a.zoom,top:w,left:T,factor:1,distance:x,aspect:L};{const A=a.fov*Math.PI/180,b=2*Math.tan(A/2)*x,j=b*(P/E);return{width:j,height:b,top:w,left:T,factor:P/j,distance:x,aspect:L}}}let d;const p=a=>g(l=>({performance:{...l.performance,current:a}})),C=new mt;return{set:g,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(a=1)=>e(i(),a),advance:(a,l)=>t(a,l,i()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new ht,pointer:C,mouse:C,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const a=i();d&&clearTimeout(d),a.performance.current!==a.performance.min&&p(a.performance.min),d=setTimeout(()=>p(i().performance.max),a.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:u},setEvents:a=>g(l=>({...l,events:{...l.events,...a}})),setSize:(a,l,m,P,E)=>{const w=i().camera,T={width:a,height:l,top:P||0,left:E||0,updateStyle:m};g(L=>({size:T,viewport:{...L.viewport,...u(w,n,T)}}))},setDpr:a=>g(l=>{const m=Ge(a);return{viewport:{...l.viewport,dpr:m,initialDpr:l.viewport.initialDpr||m}}}),setFrameloop:(a="always")=>{const l=i().clock;l.stop(),l.elapsedTime=0,a!=="never"&&(l.start(),l.elapsedTime=0),g(()=>({frameloop:a}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:O.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(a,l,m)=>{const P=i().internal;return P.priority=P.priority+(l>0?1:0),P.subscribers.push({ref:a,priority:l,store:m}),P.subscribers=P.subscribers.sort((E,w)=>E.priority-w.priority),()=>{const E=i().internal;E!=null&&E.subscribers&&(E.priority=E.priority-(l>0?1:0),E.subscribers=E.subscribers.filter(w=>w.ref!==a))}}}}}),s=o.getState();let c=s.size,f=s.viewport.dpr,_=s.camera;return o.subscribe(()=>{const{camera:g,size:i,viewport:v,gl:n,set:r}=o.getState();if(i.width!==c.width||i.height!==c.height||v.dpr!==f){var u;c=i,f=v.dpr,zt(g,i),n.setPixelRatio(v.dpr);const d=(u=i.updateStyle)!=null?u:typeof HTMLCanvasElement<"u"&&n.domElement instanceof HTMLCanvasElement;n.setSize(i.width,i.height,d)}g!==_&&(_=g,r(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(g)}})))}),o.subscribe(g=>e(g)),o};let ie,Gt=new Set,Ut=new Set,$t=new Set;function ve(e,t){if(e.size)for(const{callback:o}of e.values())o(t)}function ee(e,t){switch(e){case"before":return ve(Gt,t);case"after":return ve(Ut,t);case"tail":return ve($t,t)}}let me,he;function ge(e,t,o){let s=t.clock.getDelta();for(t.frameloop==="never"&&typeof e=="number"&&(s=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),me=t.internal.subscribers,ie=0;ie<me.length;ie++)he=me[ie],he.ref.current(he.store.getState(),s,o);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function Wt(e){let t=!1,o,s,c;function f(i){s=requestAnimationFrame(f),t=!0,o=0,ee("before",i);for(const n of e.values()){var v;c=n.store.getState(),c.internal.active&&(c.frameloop==="always"||c.internal.frames>0)&&!((v=c.gl.xr)!=null&&v.isPresenting)&&(o+=ge(i,c))}if(ee("after",i),o===0)return ee("tail",i),t=!1,cancelAnimationFrame(s)}function _(i,v=1){var n;if(!i)return e.forEach(r=>_(r.store.getState()),v);(n=i.gl.xr)!=null&&n.isPresenting||!i.internal.active||i.frameloop==="never"||(i.internal.frames=Math.min(60,i.internal.frames+v),t||(t=!0,requestAnimationFrame(f)))}function g(i,v=!0,n,r){if(v&&ee("before",i),n)ge(i,n,r);else for(const u of e.values())ge(i,u.store.getState());v&&ee("after",i)}return{loop:f,invalidate:_,advance:g}}function Xe(){const e=O.useContext(Ve);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function U(e=o=>o,t){return Xe()(e,t)}function Vt(e,t=0){const o=Xe(),s=o.getState().internal.subscribe,c=He(e);return ne(()=>s(c,t,o),[t,s,o]),null}const xe=new WeakMap;function Ye(e,t){return function(o,...s){let c=xe.get(o);return c||(c=new o,xe.set(o,c)),e&&e(c),Promise.all(s.map(f=>new Promise((_,g)=>c.load(f,i=>{i.scene&&Object.assign(i,Dt(i.scene)),_(i)},t,i=>g(new Error(`Could not load ${f}: ${i==null?void 0:i.message}`)))))).finally(()=>c.dispose==null?void 0:c.dispose())}}function re(e,t,o,s){const c=Array.isArray(t)?t:[t],f=St(Ye(o,s),[e,...c],{equal:D.equ});return Array.isArray(t)?f:f[0]}re.preload=function(e,t,o){const s=Array.isArray(t)?t:[t];return Mt(Ye(o),[e,...s])};re.clear=function(e,t){const o=Array.isArray(t)?t:[t];return Ot([e,...o])};const Q=new Map,{invalidate:Ae,advance:De}=Wt(Q),{reconciler:ae,applyProps:V}=Lt(Q,Bt),X={objects:"shallow",strict:!1},Xt=(e,t)=>{const o=typeof e=="function"?e(t):e;return We(o)?o:new ut({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function Yt(e,t){const o=typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement;if(t){const{width:s,height:c,top:f,left:_,updateStyle:g=o}=t;return{width:s,height:c,top:f,left:_,updateStyle:g}}else if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:s,height:c,top:f,left:_}=e.parentElement.getBoundingClientRect();return{width:s,height:c,top:f,left:_,updateStyle:o}}else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0,updateStyle:o};return{width:0,height:0,top:0,left:0}}function Kt(e){const t=Q.get(e),o=t==null?void 0:t.fiber,s=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const c=typeof reportError=="function"?reportError:console.error,f=s||qt(Ae,De),_=o||ae.createContainer(f,J.ConcurrentRoot,null,!1,null,"",c,null);t||Q.set(e,{fiber:_,store:f});let g,i=!1,v;return{configure(n={}){let{gl:r,size:u,scene:d,events:p,onCreated:C,shadows:y=!1,linear:a=!1,flat:l=!1,legacy:m=!1,orthographic:P=!1,frameloop:E="always",dpr:w=[1,2],performance:T,raycaster:L,camera:x,onPointerMissed:A}=n,b=f.getState(),j=b.gl;b.gl||b.set({gl:j=Xt(r,e)});let z=b.raycaster;z||b.set({raycaster:z=new it});const{params:q,...W}=L||{};if(D.equ(W,z,X)||V(z,{...W}),D.equ(q,z.params,X)||V(z,{params:{...z.params,...q}}),!b.camera||b.camera===v&&!D.equ(v,x,X)){v=x;const R=x instanceof ft,I=R?x:P?new st(0,0,0,0,.1,1e3):new at(75,0,.1,1e3);R||(I.position.z=5,x&&V(I,x),!b.camera&&!(x!=null&&x.rotation)&&I.lookAt(0,0,0)),b.set({camera:I}),z.camera=I}if(!b.scene){let R;d instanceof Se?R=d:(R=new Se,d&&V(R,d)),b.set({scene:Y(R)})}if(!b.xr){var H;const R=(F,N)=>{const $=f.getState();$.frameloop!=="never"&&De(F,!0,$,N)},I=()=>{const F=f.getState();F.gl.xr.enabled=F.gl.xr.isPresenting,F.gl.xr.setAnimationLoop(F.gl.xr.isPresenting?R:null),F.gl.xr.isPresenting||Ae(F)},B={connect(){const F=f.getState().gl;F.xr.addEventListener("sessionstart",I),F.xr.addEventListener("sessionend",I)},disconnect(){const F=f.getState().gl;F.xr.removeEventListener("sessionstart",I),F.xr.removeEventListener("sessionend",I)}};typeof((H=j.xr)==null?void 0:H.addEventListener)=="function"&&B.connect(),b.set({xr:B})}if(j.shadowMap){const R=j.shadowMap.enabled,I=j.shadowMap.type;if(j.shadowMap.enabled=!!y,D.boo(y))j.shadowMap.type=ce;else if(D.str(y)){var G;const B={basic:dt,percentage:pt,soft:ce,variance:vt};j.shadowMap.type=(G=B[y])!=null?G:ce}else D.obj(y)&&Object.assign(j.shadowMap,y);(R!==j.shadowMap.enabled||I!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}const h=ze();h&&("enabled"in h?h.enabled=!m:"legacyMode"in h&&(h.legacyMode=m)),V(j,{outputEncoding:a?3e3:3001,toneMapping:l?lt:ct}),b.legacy!==m&&b.set(()=>({legacy:m})),b.linear!==a&&b.set(()=>({linear:a})),b.flat!==l&&b.set(()=>({flat:l})),r&&!D.fun(r)&&!We(r)&&!D.equ(r,j,X)&&V(j,r),p&&!b.events.handlers&&b.set({events:p(f)});const k=Yt(e,u);return D.equ(k,b.size,X)||b.setSize(k.width,k.height,k.updateStyle,k.top,k.left),w&&b.viewport.dpr!==Ge(w)&&b.setDpr(w),b.frameloop!==E&&b.setFrameloop(E),b.onPointerMissed||b.set({onPointerMissed:A}),T&&!D.equ(T,b.performance,X)&&b.set(R=>({performance:{...R.performance,...T}})),g=C,i=!0,this},render(n){return i||this.configure(),ae.updateContainer(O.createElement(Jt,{store:f,children:n,onCreated:g,rootElement:e}),_,null,()=>{}),f},unmount(){Ke(e)}}}function Jt({store:e,children:t,onCreated:o,rootElement:s}){return ne(()=>{const c=e.getState();c.set(f=>({internal:{...f.internal,active:!0}})),o&&o(c),e.getState().events.connected||c.events.connect==null||c.events.connect(s)},[]),O.createElement(Ve.Provider,{value:e},t)}function Ke(e,t){const o=Q.get(e),s=o==null?void 0:o.fiber;if(s){const c=o==null?void 0:o.store.getState();c&&(c.internal.active=!1),ae.updateContainer(null,s,null,()=>{c&&setTimeout(()=>{try{var f,_,g,i;c.events.disconnect==null||c.events.disconnect(),(f=c.gl)==null||(_=f.renderLists)==null||_.dispose==null||_.dispose(),(g=c.gl)==null||g.forceContextLoss==null||g.forceContextLoss(),(i=c.gl)!=null&&i.xr&&c.xr.disconnect(),It(c),Q.delete(e),t&&t(e)}catch{}},500)})}}ae.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:O.version});const ye={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Qt(e){const{handlePointer:t}=Nt(e);return{priority:1,enabled:!0,compute(o,s,c){s.pointer.set(o.offsetX/s.size.width*2-1,-(o.offsetY/s.size.height)*2+1),s.raycaster.setFromCamera(s.pointer,s.camera)},connected:void 0,handlers:Object.keys(ye).reduce((o,s)=>({...o,[s]:t(s)}),{}),update:()=>{var o;const{events:s,internal:c}=e.getState();(o=c.lastEvent)!=null&&o.current&&s.handlers&&s.handlers.onPointerMove(c.lastEvent.current)},connect:o=>{var s;const{set:c,events:f}=e.getState();f.disconnect==null||f.disconnect(),c(_=>({events:{..._.events,connected:o}})),Object.entries((s=f.handlers)!=null?s:[]).forEach(([_,g])=>{const[i,v]=ye[_];o.addEventListener(i,g,{passive:v})})},disconnect:()=>{const{set:o,events:s}=e.getState();if(s.connected){var c;Object.entries((c=s.handlers)!=null?c:[]).forEach(([f,_])=>{if(s&&s.connected instanceof HTMLElement){const[g]=ye[f];s.connected.removeEventListener(g,_)}}),o(f=>({events:{...f.events,connected:void 0}}))}}}}const Zt=O.forwardRef(function({children:t,fallback:o,resize:s,style:c,gl:f,events:_=Qt,eventSource:g,eventPrefix:i,shadows:v,linear:n,flat:r,legacy:u,orthographic:d,frameloop:p,dpr:C,performance:y,raycaster:a,camera:l,scene:m,onPointerMissed:P,onCreated:E,...w},T){O.useMemo(()=>Tt(gt),[]);const L=wt(),[x,A]=yt({scroll:!0,debounce:{scroll:50,resize:0},...s}),b=O.useRef(null),j=O.useRef(null);O.useImperativeHandle(T,()=>b.current);const z=He(P),[q,W]=O.useState(!1),[H,G]=O.useState(!1);if(q)throw q;if(H)throw H;const h=O.useRef(null);ne(()=>{const S=b.current;A.width>0&&A.height>0&&S&&(h.current||(h.current=Kt(S)),h.current.configure({gl:f,events:_,shadows:v,linear:n,flat:r,legacy:u,orthographic:d,frameloop:p,dpr:C,performance:y,raycaster:a,camera:l,scene:m,size:A,onPointerMissed:(...k)=>z.current==null?void 0:z.current(...k),onCreated:k=>{k.events.connect==null||k.events.connect(g?jt(g)?g.current:g:j.current),i&&k.setEvents({compute:(R,I)=>{const B=R[i+"X"],F=R[i+"Y"];I.pointer.set(B/I.size.width*2-1,-(F/I.size.height)*2+1),I.raycaster.setFromCamera(I.pointer,I.camera)}}),E==null||E(k)}}),h.current.render(O.createElement(L,null,O.createElement(Ne,{set:G},O.createElement(O.Suspense,{fallback:O.createElement(xt,{set:W})},t)))))}),O.useEffect(()=>{const S=b.current;if(S)return()=>Ke(S)},[]);const M=g?"none":"auto";return O.createElement("div",be({ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:M,...c}},w),O.createElement("div",{ref:x,style:{width:"100%",height:"100%"}},O.createElement("canvas",{ref:b,style:{display:"block"}},o)))}),dn=O.forwardRef(function(t,o){return O.createElement(_t,null,O.createElement(Zt,be({},t,{ref:o})))});let se=null,Je="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Qe(e,t,o){return s=>{o&&o(s),e&&(se||(se=new Et),se.setDecoderPath(typeof e=="string"?e:Je),s.setDRACOLoader(se)),t&&s.setMeshoptDecoder(typeof ue=="function"?ue():ue)}}function Pe(e,t=!0,o=!0,s){return re(Ee,e,Qe(t,o,s))}Pe.preload=(e,t=!0,o=!0,s)=>re.preload(Ee,e,Qe(t,o,s));Pe.clear=e=>re.clear(Ee,e);Pe.setDecoderPath=e=>{Je=e};const pn=O.forwardRef(({makeDefault:e,camera:t,regress:o,domElement:s,enableDamping:c=!0,keyEvents:f=!1,onChange:_,onStart:g,onEnd:i,...v},n)=>{const r=U(w=>w.invalidate),u=U(w=>w.camera),d=U(w=>w.gl),p=U(w=>w.events),C=U(w=>w.setEvents),y=U(w=>w.set),a=U(w=>w.get),l=U(w=>w.performance),m=t||u,P=s||p.connected||d.domElement,E=O.useMemo(()=>new Ct(m),[m]);return Vt(()=>{E.enabled&&E.update()},-1),O.useEffect(()=>(f&&E.connect(f===!0?P:f),E.connect(P),()=>void E.dispose()),[f,P,o,E,r]),O.useEffect(()=>{const w=x=>{r(),o&&l.regress(),_&&_(x)},T=x=>{g&&g(x)},L=x=>{i&&i(x)};return E.addEventListener("change",w),E.addEventListener("start",T),E.addEventListener("end",L),()=>{E.removeEventListener("start",T),E.removeEventListener("end",L),E.removeEventListener("change",w)}},[_,g,i,E,r,C]),O.useEffect(()=>{if(e){const w=a().controls;return y({controls:E}),()=>y({controls:w})}},[e,E]),O.createElement("primitive",be({ref:n,object:E,enableDamping:c},v))});export{dn as C,pn as O,fn as _,Pe as u};
